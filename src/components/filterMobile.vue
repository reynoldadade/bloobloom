<script setup lang="ts">
import { Ref, ref } from "vue";
import { useAppStore } from "../stores";
import { useCollectionsStore } from "../stores/collections";
import FilterPanelMobile from "./filterPanelMobile.vue";

const store = useCollectionsStore();
const appStore = useAppStore();
const colors: Ref<string[]> = ref([
  "black",
  "tortoise",
  "coloured",
  "crystal",
  "dark",
  "bright",
]);

const shapes: Ref<string[]> = ref(["square", "rectangle", "round", "cat-eye"]);
</script>

<template>
  <div class="filter__container__mobile">
    <div class="screen__main__header">
      <span>Filters</span>
      <div
        class="close__button"
        @click="appStore.openOrCloseMobileFilterContainer(false)"
      >
        <svg width="12" height="13" viewBox="0 0 12 13" fill="none">
          <path
            d="M6.86094 6.00005L11.3159 1.14005C11.4161 1.01252 11.4684 0.848467 11.4624 0.680683C11.4565 0.512899 11.3927 0.35374 11.2839 0.23501C11.1751 0.11628 11.0292 0.0467252 10.8754 0.0402444C10.7216 0.0337637 10.5712 0.0908347 10.4543 0.200052L5.99928 5.06005L1.54428 0.193385C1.42737 0.0841679 1.27699 0.0270975 1.12319 0.0335782C0.969388 0.040059 0.823492 0.109614 0.714657 0.228343C0.605821 0.347073 0.542062 0.506232 0.536122 0.674016C0.530181 0.8418 0.582496 1.00585 0.682612 1.13339L5.13761 6.00005L0.676501 10.8601C0.612529 10.9198 0.560572 10.9934 0.523891 11.0761C0.48721 11.1588 0.466597 11.2489 0.463346 11.3407C0.460095 11.4325 0.474277 11.5241 0.505 11.6096C0.535723 11.6952 0.582326 11.7729 0.641881 11.8378C0.701437 11.9028 0.77266 11.9536 0.851081 11.9871C0.929502 12.0207 1.01343 12.0361 1.09759 12.0326C1.18175 12.029 1.26433 12.0066 1.34015 11.9665C1.41597 11.9265 1.48338 11.8698 1.53817 11.8001L5.99928 6.94005L10.4543 11.8001C10.5712 11.9093 10.7216 11.9663 10.8754 11.9599C11.0292 11.9534 11.1751 11.8838 11.2839 11.7651C11.3927 11.6464 11.4565 11.4872 11.4624 11.3194C11.4684 11.1516 11.4161 10.9876 11.3159 10.8601L6.86094 6.00005Z"
            fill="black"
          ></path>
        </svg>
      </div>
    </div>
    <div class="screen__main__filters__small">
      <FilterPanelMobile
        :filters="colors"
        :filter-name="'colour'"
        @select-filter="store.addColorFilter"
      />
      <FilterPanelMobile
        :filters="shapes"
        :filter-name="'shape'"
        @select-filter="store.addFrameFilter"
      />
    </div>
    <div class="footer__filters__list">
      <div
        class="filter__tag"
        v-for="selectedColor in store.selectedColorFilters"
        :key="selectedColor"
        @click="store.removeColorFilter(selectedColor)"
      >
        <span>{{ selectedColor }}</span>
        <svg width="10" height="11" viewBox="0 0 10 11" fill="none">
          <path
            d="M5.70499 5.49998L9.34999 1.65248C9.4319 1.55151 9.4747 1.42164 9.46984 1.28881C9.46498 1.15598 9.41282 1.02998 9.32377 0.935984C9.23472 0.841989 9.11535 0.786925 8.98951 0.781794C8.86368 0.776663 8.74064 0.821845 8.64499 0.908309L4.99999 4.75581L1.35499 0.903031C1.25934 0.816567 1.1363 0.771386 1.01046 0.776517C0.884622 0.781647 0.765253 0.836711 0.676205 0.930706C0.587158 1.0247 0.534992 1.1507 0.530131 1.28353C0.52527 1.41636 0.568074 1.54623 0.649987 1.6472L4.29499 5.49998L0.644987 9.34748C0.592646 9.39479 0.550136 9.45301 0.520124 9.51849C0.490112 9.58397 0.473247 9.65529 0.470587 9.72797C0.467928 9.80066 0.479531 9.87314 0.504668 9.94087C0.529805 10.0086 0.567934 10.0701 0.616662 10.1215C0.665389 10.173 0.723663 10.2132 0.787825 10.2398C0.851988 10.2663 0.920654 10.2785 0.989514 10.2757C1.05837 10.2729 1.12594 10.2551 1.18797 10.2234C1.25 10.1918 1.30516 10.1469 1.34999 10.0916L4.99999 6.24414L8.64499 10.0916C8.74064 10.1781 8.86368 10.2233 8.98951 10.2182C9.11535 10.213 9.23472 10.158 9.32377 10.064C9.41282 9.96997 9.46498 9.84397 9.46984 9.71114C9.4747 9.57831 9.4319 9.44844 9.34999 9.34748L5.70499 5.49998Z"
            fill="black"
          ></path>
        </svg>
      </div>
      <div
        class="filter__tag"
        v-for="selectedShape in store.selectedFrameFilters"
        :key="selectedShape"
        @click="store.removeFrameFilter(selectedShape)"
      >
        <span>{{ selectedShape }}</span>
        <svg width="10" height="11" viewBox="0 0 10 11" fill="none">
          <path
            d="M5.70499 5.49998L9.34999 1.65248C9.4319 1.55151 9.4747 1.42164 9.46984 1.28881C9.46498 1.15598 9.41282 1.02998 9.32377 0.935984C9.23472 0.841989 9.11535 0.786925 8.98951 0.781794C8.86368 0.776663 8.74064 0.821845 8.64499 0.908309L4.99999 4.75581L1.35499 0.903031C1.25934 0.816567 1.1363 0.771386 1.01046 0.776517C0.884622 0.781647 0.765253 0.836711 0.676205 0.930706C0.587158 1.0247 0.534992 1.1507 0.530131 1.28353C0.52527 1.41636 0.568074 1.54623 0.649987 1.6472L4.29499 5.49998L0.644987 9.34748C0.592646 9.39479 0.550136 9.45301 0.520124 9.51849C0.490112 9.58397 0.473247 9.65529 0.470587 9.72797C0.467928 9.80066 0.479531 9.87314 0.504668 9.94087C0.529805 10.0086 0.567934 10.0701 0.616662 10.1215C0.665389 10.173 0.723663 10.2132 0.787825 10.2398C0.851988 10.2663 0.920654 10.2785 0.989514 10.2757C1.05837 10.2729 1.12594 10.2551 1.18797 10.2234C1.25 10.1918 1.30516 10.1469 1.34999 10.0916L4.99999 6.24414L8.64499 10.0916C8.74064 10.1781 8.86368 10.2233 8.98951 10.2182C9.11535 10.213 9.23472 10.158 9.32377 10.064C9.41282 9.96997 9.46498 9.84397 9.46984 9.71114C9.4747 9.57831 9.4319 9.44844 9.34999 9.34748L5.70499 5.49998Z"
            fill="black"
          ></path>
        </svg>
      </div>
    </div>
    <div class="screen__buttons">
      <div class="clear__button">clear all</div>
      <div class="done__button">done</div>
    </div>
  </div>
</template>
